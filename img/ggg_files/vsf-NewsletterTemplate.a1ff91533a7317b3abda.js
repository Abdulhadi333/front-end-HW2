(window.webpackJsonp=window.webpackJsonp||[]).push([[121,207],{2064:function(e,t,n){"use strict";n.r(t);var i=n(205),r={name:"NewsletterSubscribe",data:function(){return{email:""}},validations:{email:{required:i.required,email:i.email}},methods:{subscribe:function(e,t){if(!this.$v.$invalid)return this.$store.dispatch("newsletter/subscribe",this.email).then((function(t){e&&e(t)})).catch((function(e){t&&t(e)}))}}},s=n(1110),a=n.n(s),u=(n(244),n(1),n(600)),o=n(606),l=n(6);function c(e,t,n,i,r,s,a){try{var u=e[s](a),o=u.value}catch(e){return void n(e)}u.done?t(o):Promise.resolve(o).then(i,r)}var d={name:"NewsletterTemplate",methods:{getMobileNumber:function(){var e="",t=this.$store.state.user.current;return t&&t.hasOwnProperty("custom_attributes")&&t.custom_attributes.forEach(function(){var t,n=(t=regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"mobile_number"===n.attribute_code&&(e=n.value?n.value:"");case 1:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function a(e){c(s,i,r,a,u,"next",e)}function u(e){c(s,i,r,a,u,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}()),e},onSubmission:function(){var e=this;if(this.$v.$invalid)this.$v.$touch();else{var t,n,i=this.$store.state.user.current;if(i&&i.email===this.email){var r={id:i.id,email:i.email,firstname:i.firstname,lastname:i.lastname,store_id:i.store_id,website_id:i.website_id,isd_code:(n=i.custom_attributes.find((function(e){return"isd_code"===e.attribute_code})),n?n.value:""),mobile_number:this.getMobileNumber().replace(/\s+/g,""),otpId:"",subscribe:!0,s_id:Object(l.b)().storeId,preferredLanguage:(t=i.custom_attributes.find((function(e){return"preferred_language"===e.attribute_code})),t?t.value:""),newPassword:"",currentPassword:"",extension_attributes:{is_subscribed:!0}};this.$store.dispatch("my-account/updateProfile",r).then((function(t){t&&200!==t.code?console.log("issue while subscription"):(a()({icon:"success",text:"Confirmation request has been sent.",button:{text:"Continue",className:"btn btn-primary"}}),e.email="",e.$v.$reset(),e.$bus.$emit("gtm-newsletter-confirmation",r))})).catch((function(e){console.log(e)}))}else this.$store.dispatch("newsLetterStore/subscribe",{email:this.email}).then((function(t){200!==t.code?console.log("issue while subscription"):(a()({icon:"success",text:"Confirmation request has been sent.",button:{text:"Continue",className:"btn btn-primary"}}),e.$bus.$emit("gtm-newsletter-confirmation",{email:e.email}),e.email="",e.$v.$reset())})).catch((function(e){console.log(e)}))}},onSubscribe:function(e){e&&a()({icon:"success",text:"Confirmation request has been sent.",button:{text:"Continue",className:"btn btn-primary"}})}},components:{ButtonFull:u.a,BaseInput:o.a},mixins:[r]},f=n(243),m=Object(f.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.onSubmission(t)}}},[n("BaseInput",{attrs:{type:"email",name:"email",autocomplete:"email","input-class":"input__field--no-border",placeholder:e.$t("Enter your email address"),validations:[{error:e.$v.email.$error},{condition:e.$v.email.$error&&!e.$v.email.required,text:e.$t("This is a required field.")},{condition:!e.$v.email.email&&e.$v.email.$error,text:e.$t("Please provide valid e-mail address.")}]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),n("ButtonFull",{staticClass:"button--standard button--primary",attrs:{type:"submit"},nativeOn:{click:function(t){return e.$v.email.$touch(t)}}},[e._v("\n    "+e._s(e.$t("Subscribe"))+"\n  ")])],1)}),[],!1,null,null,null);t.default=m.exports},601:function(e,t,n){"use strict";var i={props:{validations:{type:Array,default:function(){return[]}}}},r=n(243),s=Object(r.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.validations?n("div",e._l(e.validations,(function(t,i){return t.condition?n("span",{key:i,staticClass:"input__subtext",attrs:{"data-testid":"errorMessage"}},[e._v("\n    "+e._s(t.text)+"\n  ")]):e._e()})),0):e._e()}),[],!1,null,null,null);t.a=s.exports},606:function(e,t,n){"use strict";var i=n(601),r=n(598),s={name:"BaseInput",components:{ValidationMessages:i.a,Icon:r.a},computed:{inputError:function(){return!!this.validations.length&&this.validations.some((function(e){return e.condition}))}},props:{isAlphabet:{type:Boolean,required:!1},isNumber:{type:Boolean,required:!1},type:{type:String,required:!0},value:{type:[String,Number],default:""},name:{type:String,required:!1,default:""},placeholder:{type:String,required:!1,default:""},label:{type:String,required:!1,default:""},autocomplete:{type:String,required:!1,default:""},focus:{type:Boolean,required:!1,default:!1},autofocus:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},disabledClass:{type:Boolean,required:!1,default:!0},link:{type:Array,required:!1,default:function(){return[]}},maxlength:{type:Number,required:!1,default:null},validations:{type:Array,default:function(){return[]}},icon:{type:String,required:!1,default:""},iconClass:{type:String,required:!1,default:""},subText:{type:String,required:!1,default:""},inputClass:{type:String,required:!1,default:""},async:{type:Boolean,default:!1}},methods:{isLetter:function(e){var t=String.fromCharCode(e.keyCode);if(this.isAlphabet){if(/^[A-Za-z ]+$/.test(t))return!0;if(/^[\u0600-\u06ff]|[\u0750-\u077f]|[\ufb50-\ufbc1]|[\ufbd3-\ufd3f]|[\ufd50-\ufd8f]|[\ufd92-\ufdc7]|[\ufe70-\ufefc]|[\uFDF0-\uFDFD]+$/.test(t))return!0;e.preventDefault()}else if(this.isNumber){if(/^[0-9]+$/.test(t))return!0;e.preventDefault()}},iconEvent:function(){this.$emit("iconEventTrigger")},setFocus:function(e){this.name===e&&this.$refs[this.name].focus()}},mounted:function(){this.focus&&this.$refs[this.name].focus()},watch:{focus:function(e){e&&this.$refs[this.name].focus()}}},a=n(243),u=Object(a.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input input--field",class:{"input--disabled":e.disabled&&e.disabledClass,"input--error":e.inputError}},[n("div",{staticClass:"input__row"},[e.label?n("label",{staticClass:"input__label"},[e._v(e._s(e.label))]):e._e(),e._v(" "),e.async?n("div",{staticClass:"input__icon async async--dark"}):e._e(),e._v(" "),n("input",{ref:e.name,staticClass:"input__field",class:[{empty:""===e.value},e.inputClass],attrs:{placeholder:e.placeholder,type:e.type,name:e.name,autocomplete:e.autocomplete,autofocus:e.autofocus,disabled:e.disabled,maxlength:e.maxlength},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)},focus:function(t){return e.$emit("focus",t.target.value)},blur:function(t){return e.$emit("blur")},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("keyup.enter",t.target.value)},function(t){return e.$emit("keyup",t)}],keypress:function(t){return e.isLetter(t)}}}),e._v(" "),e.link.length?n("a",{staticClass:"input__link",attrs:{href:e.link[0].href}},[e._v("\n      "+e._s(e.link[0].text)+"\n    ")]):e._e(),e._v(" "),e.icon?n("div",{staticClass:"input__icon cursor-pointer",on:{click:e.iconEvent}},[n("Icon",{class:e.iconClass,attrs:{"icon-id":e.icon}})],1):e._e(),e._v(" "),e.subText?n("div",{staticClass:"input__subtext"},[e._v("\n      "+e._s(e.subText)+"\n    ")]):e._e()]),e._v(" "),e.validations?n("ValidationMessages",{attrs:{validations:e.validations}}):e._e()],1)}),[],!1,null,null,null);t.a=u.exports}}]);
//# sourceMappingURL=vsf-NewsletterTemplate.a1ff91533a7317b3abda.js.map