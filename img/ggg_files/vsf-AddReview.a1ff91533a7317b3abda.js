(window.webpackJsonp=window.webpackJsonp||[]).push([[54,144,207],{1319:function(e,t,a){"use strict";var i=a(823);a.n(i).a},1320:function(e,t,a){(e.exports=a(320)(!1)).push([e.i,"[dir] .review-add__content[data-v-371f7318]{background-color:#fff;-webkit-box-shadow:0 1px 3px 0 rgba(0,0,0,0.15);box-shadow:0 1px 3px 0 rgba(0,0,0,0.15);border-radius:4px;padding:16px}.review-add__label[data-v-371f7318]{display:block;color:#8492a6;font-size:10px}[dir] .review-add__label[data-v-371f7318]{margin:0 0 8px 0}[dir] .review-add__row[data-v-371f7318]{margin:0 0 16px 0}[dir] .review-add__action[data-v-371f7318]{margin-top:16px}[dir=ltr] .review-add__action[data-v-371f7318]{text-align:right}[dir=rtl] .review-add__action[data-v-371f7318]{text-align:left}.review-add .rating[data-v-371f7318]{-ms-flex-pack:start;justify-content:flex-start}.review-item[data-v-371f7318]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}[dir] .review-item[data-v-371f7318]{padding:0 16px}.review-item__image[data-v-371f7318]{width:56px}.review-item__image--large[data-v-371f7318]{width:88px}[dir=ltr] .review-item__content[data-v-371f7318]{margin:0 0 0 16px}[dir=rtl] .review-item__content[data-v-371f7318]{margin:0 16px 0 0}.review-item__title[data-v-371f7318]{color:#273444;font-weight:bold}[dir] .review-item__title[data-v-371f7318]{margin:0 0 4px 0}.review-item__logo[data-v-371f7318]{height:24px;width:auto}[dir] .review-item__logo[data-v-371f7318]{margin:0 0 8px 0}.review-item__info[data-v-371f7318]{font-size:14px;color:#3c4858;height:32px;overflow:hidden}\n",""])},1503:function(e,t,a){"use strict";a.r(t);var i=a(1),r=a(205),n=a(600),s=a(637),o=a(606),l=a(645),u=a(12),d=a(844),c=a(601),v=a(2),f=a(148),m=a(6),p=a(627),g=a(611),h=a.n(g);function _(e,t,a,i,r,n,s){try{var o=e[n](s),l=o.value}catch(e){return void a(e)}o.done?t(l):Promise.resolve(l).then(i,r)}var y={name:"AddReview",data:function(){return{mediaBaseUrl:i.brandLogoBaseUrl,async:!1,reviewTitle:"",reviewText:"",rating:"",productIdentityId:"",authorId:this.$store.state.user.current?Number(this.$store.state.user.current.id):0,authorName:this.$store.state.user.current?this.$store.state.user.current.firstname+this.$store.state.user.current.lastname:"",srcStoreId:"",validation:{required:u.a.t("Field is required.")},size:i.images.productImageSize.default}},components:{ButtonFull:n.a,BaseTextarea:s.a,BaseInput:o.a,Rating:d.default,ProductImage:l.default,ValidationMessages:c.a},mixins:[p.a],props:{item:{type:Object,required:!0}},validations:{reviewTitle:{required:r.required},reviewText:{required:r.required},rating:{required:r.required},authorName:{required:r.required}},methods:{parseProductGallery:function(e){return Object(f.e)(e)},image:function(e){var t=e?i.cdnImageBaseUrl.value+e:"";return{src:t,loading:t}},addReview:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$v.$invalid){e.next=5;break}t.$v.$touch(),t.$nextTick((function(){Object(f.h)()})),e.next=8;break;case 5:return t.async=!0,e.next=8,t.$store.dispatch("reviews/addReview",{reviewTitle:h()(t.reviewTitle,{allowedTags:[]}),reviewText:h()(t.reviewText,{allowedTags:[]}),rating:t.rating,productIdentityId:t.item.sku,authorId:t.$store.state.user.current?Number(t.$store.state.user.current.id):0,authorName:t.authorName?t.authorName:"Guest",srcStoreId:Object(m.b)().storeCode}).then((function(e){if(t.async=!1,e&&200===e.code){t.$emit("addReviewSubmit",{toggleModal:{},msg:u.a.t("Successfully submitted a review"),class:"notification--success",icon:"completed-circle",status:!0});var a={rating:t.rating,sku:t.item.sku};t.$bus.$emit("gtm-add-review",a)}else t.$emit("addReviewSubmit",{toggleModal:{},msg:u.a.t("Error adding Review"),class:"notification--error",icon:"error-circle",status:!1})})).catch((function(e){v.a.error(e)}));case 8:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(i,r){var n=e.apply(t,a);function s(e){_(n,i,r,s,o,"next",e)}function o(e){_(n,i,r,s,o,"throw",e)}s(void 0)}))})()},onAfterRate:function(e){v.a.info(e)}}},w=(a(1319),a(243)),b=Object(w.a)(y,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"review-add",on:{submit:function(t){return t.preventDefault(),e.addReview(t)}}},[a("div",{staticClass:"review-add__content"},[a("div",{staticClass:"review-add__row"},[a("div",{staticClass:"review-item"},[a("div",{staticClass:"review-item__image"},[a("ProductImage",{attrs:{image:e.parseProductGallery(e.item),size:e.size}})],1),e._v(" "),a("div",{staticClass:"review-item__content"},[e.item.brands_data?[e.item.brands_data.label||e.item.brands_data.image?a("div",{staticClass:"product-title__logo"},[e.item.brands_data.image?a("div",{staticClass:"image-wrapper"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.mediaBaseUrl+e.item.brands_data.image,expression:"mediaBaseUrl + item.brands_data.image"}],staticClass:"image",attrs:{title:e.item.brands_data.label}})]):a("p",{staticClass:"product-title__brand"},[e._v("\n                "+e._s(e.item.brands_data.label)+"\n              ")])]):e._e()]:e._e(),e._v(" "),e.item.name?a("p",{staticClass:"review-item__title"},[e._v("\n            "+e._s(e.splitTitle(e.item,"title"))+"\n          ")]):e._e(),e._v(" "),e.splitTitle(e.item,"desc")?a("p",{staticClass:"review-item__info"},[e._v("\n            "+e._s(e.splitTitle(e.item,"desc"))+"\n          ")]):e._e()],2)])]),e._v(" "),a("p",{staticClass:"review-add__label"},[e._v("\n      "+e._s(e.$t("Choose a rating from 1-5"))+"\n    ")]),e._v(" "),a("div",{staticClass:"review-add__row"},[a("Rating",{staticClass:"mb8",attrs:{length:5,number:!0,required:!0},on:{"after-rate":e.onAfterRate},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}}),e._v(" "),e.rating?e._e():a("ValidationMessages",{attrs:{validations:[{condition:e.$v.rating.$error&&!e.$v.rating.required,text:e.validation.required}]}})],1),e._v(" "),a("div",{staticClass:"review-add__row"},[a("BaseInput",{attrs:{type:"text",name:"reviewtitle",label:e.$t("Review Title"),placeholder:e.$t("Write Here"),validations:[{condition:e.$v.reviewTitle.$error&&!e.$v.reviewTitle.required,text:e.validation.required}]},model:{value:e.reviewTitle,callback:function(t){e.reviewTitle=t},expression:"reviewTitle"}})],1),e._v(" "),a("div",{staticClass:"review-add__row"},[a("BaseTextarea",{attrs:{type:"text",name:"comment",rows:"2",cols:"50",label:e.$t("Review"),placeholder:e.$t("Write Here"),validations:[{condition:e.$v.reviewText.$error&&!e.$v.reviewText.required,text:e.validation.required}]},model:{value:e.reviewText,callback:function(t){e.reviewText=t},expression:"reviewText"}})],1),e._v(" "),a("div",{staticClass:"review-add__row"},[a("BaseInput",{attrs:{type:"text",name:"authorName",label:e.$t("Name"),placeholder:e.$t("Name"),validations:[{condition:e.$v.authorName.$error&&!e.$v.authorName.required,text:e.validation.required}]},model:{value:e.authorName,callback:function(t){e.authorName=t},expression:"authorName"}})],1)]),e._v(" "),a("div",{staticClass:"review-add__action"},[a("div",{staticClass:"row center-xs end-md"},[a("div",{staticClass:"col-xs-12 col-md-4"},[a("ButtonFull",{staticClass:"button--secondary button--fluid",class:{async:e.async},attrs:{disabled:e.async,type:"submit"}},[e._v("\n          "+e._s(e.$t("Submit"))+"\n        ")])],1)])])])}),[],!1,null,"371f7318",null);t.default=b.exports},601:function(e,t,a){"use strict";var i={props:{validations:{type:Array,default:function(){return[]}}}},r=a(243),n=Object(r.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.validations?a("div",e._l(e.validations,(function(t,i){return t.condition?a("span",{key:i,staticClass:"input__subtext",attrs:{"data-testid":"errorMessage"}},[e._v("\n    "+e._s(t.text)+"\n  ")]):e._e()})),0):e._e()}),[],!1,null,null,null);t.a=n.exports},606:function(e,t,a){"use strict";var i=a(601),r=a(598),n={name:"BaseInput",components:{ValidationMessages:i.a,Icon:r.a},computed:{inputError:function(){return!!this.validations.length&&this.validations.some((function(e){return e.condition}))}},props:{isAlphabet:{type:Boolean,required:!1},isNumber:{type:Boolean,required:!1},type:{type:String,required:!0},value:{type:[String,Number],default:""},name:{type:String,required:!1,default:""},placeholder:{type:String,required:!1,default:""},label:{type:String,required:!1,default:""},autocomplete:{type:String,required:!1,default:""},focus:{type:Boolean,required:!1,default:!1},autofocus:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},disabledClass:{type:Boolean,required:!1,default:!0},link:{type:Array,required:!1,default:function(){return[]}},maxlength:{type:Number,required:!1,default:null},validations:{type:Array,default:function(){return[]}},icon:{type:String,required:!1,default:""},iconClass:{type:String,required:!1,default:""},subText:{type:String,required:!1,default:""},inputClass:{type:String,required:!1,default:""},async:{type:Boolean,default:!1}},methods:{isLetter:function(e){var t=String.fromCharCode(e.keyCode);if(this.isAlphabet){if(/^[A-Za-z ]+$/.test(t))return!0;if(/^[\u0600-\u06ff]|[\u0750-\u077f]|[\ufb50-\ufbc1]|[\ufbd3-\ufd3f]|[\ufd50-\ufd8f]|[\ufd92-\ufdc7]|[\ufe70-\ufefc]|[\uFDF0-\uFDFD]+$/.test(t))return!0;e.preventDefault()}else if(this.isNumber){if(/^[0-9]+$/.test(t))return!0;e.preventDefault()}},iconEvent:function(){this.$emit("iconEventTrigger")},setFocus:function(e){this.name===e&&this.$refs[this.name].focus()}},mounted:function(){this.focus&&this.$refs[this.name].focus()},watch:{focus:function(e){e&&this.$refs[this.name].focus()}}},s=a(243),o=Object(s.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input input--field",class:{"input--disabled":e.disabled&&e.disabledClass,"input--error":e.inputError}},[a("div",{staticClass:"input__row"},[e.label?a("label",{staticClass:"input__label"},[e._v(e._s(e.label))]):e._e(),e._v(" "),e.async?a("div",{staticClass:"input__icon async async--dark"}):e._e(),e._v(" "),a("input",{ref:e.name,staticClass:"input__field",class:[{empty:""===e.value},e.inputClass],attrs:{placeholder:e.placeholder,type:e.type,name:e.name,autocomplete:e.autocomplete,autofocus:e.autofocus,disabled:e.disabled,maxlength:e.maxlength},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)},focus:function(t){return e.$emit("focus",t.target.value)},blur:function(t){return e.$emit("blur")},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("keyup.enter",t.target.value)},function(t){return e.$emit("keyup",t)}],keypress:function(t){return e.isLetter(t)}}}),e._v(" "),e.link.length?a("a",{staticClass:"input__link",attrs:{href:e.link[0].href}},[e._v("\n      "+e._s(e.link[0].text)+"\n    ")]):e._e(),e._v(" "),e.icon?a("div",{staticClass:"input__icon cursor-pointer",on:{click:e.iconEvent}},[a("Icon",{class:e.iconClass,attrs:{"icon-id":e.icon}})],1):e._e(),e._v(" "),e.subText?a("div",{staticClass:"input__subtext"},[e._v("\n      "+e._s(e.subText)+"\n    ")]):e._e()]),e._v(" "),e.validations?a("ValidationMessages",{attrs:{validations:e.validations}}):e._e()],1)}),[],!1,null,null,null);t.a=o.exports},631:function(e,t,a){var i=a(790);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a(321).default)("ef0dea98",i,!0,{})},637:function(e,t,a){"use strict";var i={name:"BaseTextarea",components:{ValidationMessages:a(601).a},data:function(){return{iconActive:!1,icon:"visibility"}},props:{type:{type:String,required:!0},value:{type:[String,Number],default:""},name:{type:String,required:!1,default:""},placeholder:{type:String,required:!1,default:""},label:{type:String,required:!1,default:""},autocomplete:{type:String,required:!1,default:""},focus:{type:Boolean,required:!1,default:!1},autofocus:{type:Boolean,required:!1,default:!1},validations:{type:Array,default:function(){return[]}}},computed:{inputError:function(){return!!this.validations.length&&this.validations.some((function(e){return e.condition}))}},mounted:function(){this.focus&&this.$refs[this.name].focus()}},r=a(243),n=Object(r.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input input--textarea",class:{"input--error":e.inputError}},[a("div",{staticClass:"input__row"},[e.label?a("label",{staticClass:"input__label"},[e._v(e._s(e.label))]):e._e(),e._v(" "),a("textarea",{ref:!!e.focus&&e.name,staticClass:"input__field",class:{empty:""===e.value},attrs:{type:e.type,name:e.name,autocomplete:e.autocomplete,autofocus:e.autofocus,placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)},blur:function(t){return e.$emit("blur")},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("keyup.enter",t.target.value)},function(t){return e.$emit("keyup",t)}]}})]),e._v(" "),e.validations?a("ValidationMessages",{attrs:{validations:e.validations}}):e._e()],1)}),[],!1,null,null,null);t.a=n.exports},645:function(e,t,a){"use strict";a.r(t);var i=a(3),r=a(148),n={props:{calcRatio:{type:Boolean,default:!0},size:{type:String,default:"auto"},image:{type:Object,default:function(){return{src:"",loading:""}}},alt:{type:String,default:""},imageClass:{type:String,default:""}},data:function(){return{lowerQualityImage:!1,lowerQualityImageError:!1,highQualityImage:!1,highQualityImageError:!1,basic:!0}},watch:{lowerQualityImage:function(e){e&&(this.basic=this.$refs.lQ.naturalWidth<this.$refs.lQ.naturalHeight)}},computed:{isNotValidImage:function(){return!/^((http|https):\/\/)/.test(this.image.src)||null===this.image.src.match(/\.(jpg|jpeg|gif|png)$/)||"undefined"===this.image.src.split("/").reverse()[0]||"undefined"===this.image.loading.split("/").reverse()[0]},showPlaceholder:function(){return!this.showLowerQuality&&!this.showHighQuality},showLowerQuality:function(){return this.lowerQualityImage&&!this.showHighQuality},showHighQuality:function(){return this.highQualityImage},imageRatio:function(){var e=this.$store.state.config.products.gallery,t=e.width,a=e.height;return"".concat(a/(t/100),"%")},style:function(){return this.calcRatio?{paddingBottom:this.imageRatio}:{}},isOnline:function(e){return i.h.isOnline}},methods:{resizeUsingCdnCgi:function(e){return Object(r.g)("contain",this.size,"auto",e)},imageLoaded:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this["".concat(e,"QualityImage")]=t,this["".concat(e,"QualityImageError")]=!t}}},s=(a(789),a(243)),o=Object(s.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",e._g({staticClass:"lazyload-wrapper"},e.$listeners),[a("img",{directives:[{name:"show",rawName:"v-show",value:e.showPlaceholder,expression:"showPlaceholder"},{name:"lazy",rawName:"v-lazy",value:"/assets/placeholder.png",expression:"'/assets/placeholder.png'"}],staticClass:"image image--contain",class:e.imageClass,attrs:{alt:e.alt}}),e._v(" "),!e.lowerQualityImageError||e.isOnline?a("img",{directives:[{name:"show",rawName:"v-show",value:e.showLowerQuality,expression:"showLowerQuality"},{name:"lazy",rawName:"v-lazy",value:e.isNotValidImage?"/assets/placeholder.png":e.resizeUsingCdnCgi(e.image.loading),expression:"isNotValidImage ? '/assets/placeholder.png' : resizeUsingCdnCgi(image.loading)"}],ref:"lQ",staticClass:"image image--contain",class:e.imageClass,attrs:{alt:e.alt},on:{load:function(t){return e.imageLoaded("lower",!0)},error:function(t){return e.imageLoaded("lower",!1)}}}):e._e(),e._v(" "),!e.highQualityImageError||e.isOnline?a("img",{directives:[{name:"show",rawName:"v-show",value:e.showHighQuality,expression:"showHighQuality"},{name:"lazy",rawName:"v-lazy",value:e.isNotValidImage?"/assets/placeholder.png":e.resizeUsingCdnCgi(e.image.src),expression:"isNotValidImage ? '/assets/placeholder.png' : resizeUsingCdnCgi(image.src)"}],staticClass:"image image--contain",class:e.imageClass,attrs:{alt:e.alt},on:{load:function(t){return e.imageLoaded("high",!0)},error:function(t){return e.imageLoaded("high",!1)}}}):e._e()])}),[],!1,null,null,null);t.default=o.exports},789:function(e,t,a){"use strict";var i=a(631);a.n(i).a},790:function(e,t,a){(e.exports=a(320)(!1)).push([e.i,".image--contain{width:100%;-o-object-fit:contain;object-fit:contain}\n",""])},823:function(e,t,a){var i=a(1320);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a(321).default)("3f678c05",i,!0,{})},844:function(e,t,a){"use strict";a.r(t);var i=a(598),r={name:"Rating",props:{value:{type:[Number,String],default:""},name:{type:String,default:"rate"},length:{type:Number,default:0},showcount:{type:Boolean},number:{type:Boolean,default:!1},ratingClass:{type:String,default:""},ratingStarClass:{type:String,default:""},required:{type:Boolean},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},iconWhite:{type:Boolean,default:!1}},components:{Icon:i.a},data:function(){return{over:0,rate:0,ratingHover:!1}},methods:{convertValue:function(e){return e>=this.length?e=this.length:e<0&&(e=0),e},onOver:function(e){this.readonly||(this.over=e,this.ratingHover=!0)},onOut:function(){this.readonly||(this.over=this.rate,this.ratingHover=!1)},setRate:function(e){if(this.readonly)return!1;this.$emit("before-rate",this.rate),this.rate=e,this.$emit("input",this.rate),this.$emit("after-rate",this.rate)},isFilled:function(e){return e<=this.over},isEmpty:function(e){return e>this.over||!this.value&&!this.over}},watch:{value:function(){this.rate=this.convertValue(this.value),this.over=this.convertValue(this.value)}},created:function(){this.value>=this.length?this.value=this.length:this.value<0&&(this.value=0),this.rate=this.convertValue(this.value),this.over=this.convertValue(this.value)}},n=a(243),s=Object(n.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.length>0?a("div",{staticClass:"rating",class:[{"rating--hover":e.ratingHover},{"rating--white":e.iconWhite},e.ratingClass],attrs:{id:"rating"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.rate,expression:"rate"}],attrs:{type:"hidden",name:e.name,required:e.required},domProps:{value:e.rate},on:{input:function(t){t.target.composing||(e.rate=t.target.value)}}}),e._v(" "),e._l(e.length,(function(t){return[a("label",{key:t,staticClass:"rating__star",class:[{"rating__star--hover":t<=e.over,"rating__star--checked":t<=e.rate||e.isFilled(t)},e.ratingStarClass],attrs:{disabled:e.disabled},on:{mouseover:function(a){return e.onOver(t)},mouseout:function(a){return e.onOut(t)},click:function(a){return e.setRate(t)},keyup:[function(a){return e.onOver(t)},function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.setRate(t)}]}},[a("Icon",{attrs:{"icon-id":"star"}}),e._v(" "),a("span",{staticClass:"rating__number",attrs:{number:e.number}},[e._v("\n        "+e._s(t)+"\n      ")])],1)]}))],2):e._e()}),[],!1,null,null,null);t.default=s.exports}}]);
//# sourceMappingURL=vsf-AddReview.a1ff91533a7317b3abda.js.map